# Changelog

## [Released]

## [2.0.1] - 2025-11-14 <!-- Новая версия для текущего изменения -->

### Added
- Добавлена логика хранения истории промптов для изображений (`load_image_prompts_history`, `save_image_prompt_to_history`) в `image_prompt.json` для предотвращения визуальных повторов.
- Функция `generate_image_with_hf` теперь учитывает историю промптов при генерации изображения.
 
### Changed
- **LLM промпты (SYSTEM и USER):** Обновлены для генерации более кратких, структурированных и связанных с новостью/лором английских промптов для изображений. Добавлены инструкции для избегания портретов и повторов.
- **HF генерация изображений:** Обновлён `negative_prompt` для лучшего контроля качества, стиля и избегания нежелательных визуальных элементов (портреты, текст, бренды, стилизация).

## [2.0.0] - 2025-11-13

### Added
- Добавлена функция `generate_post_with_llm_v2` с поддержкой системного и пользовательского промптов.
- Добавлена логика хранения истории сгенерированных текстов (`load_history`, `save_history`) в `history.json` для предотвращения повторов.
- Добавлена новая функция `generate_image_with_hf` для генерации изображений через Hugging Face Inference API (Stable Diffusion XL).
- Добавлен файл `CHANGELOG.md` для отслеживания изменений.

### Changed
- Функция `generate_post_with_llm` заменена на новую логику с использованием истории и разделением промптов.
- Механизм генерации изображений изменён: вместо FusionBrain API теперь используется Hugging Face Inference API (`stabilityai/stable-diffusion-xl-base-1.0`).
- В `requirements.txt` добавлена зависимость `Pillow` для работы с изображениями.
- Промпты вынесены в блок #CONFIG в начале файла.

### Removed
- Удалена старая функция `generate_image_with_kandinsky` и связанная с ней логика (асинхронный вызов, `base64`, `requests`, `time`).
