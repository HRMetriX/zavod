# Vitok News Bot

Telegram-бот, который автоматически публикует политические новости, пересказанные в стиле Витька из Кайеркана — бывалого мужика из захолустья, видавшего виды на вахтах и заводах.

## Описание

Этот бот парсит RSS-ленты новостных агентств (RIA, TASS, Lenta), извлекает политические и экономические новости, и передаёт их в LLM (Hugging Face Qwen3). Модель генерирует пост в стиле Витька, отражающий лор персонажа: его провинциальный взгляд на мир, местный юмор, бытовые детали и отстранённую иронию. Витёк не следит за политикой, но всё равно как-то "в курсе", и его комментарии — это сплав абсурда, реальности и народной мудрости.

Также генерируется промпт для изображения, который передаётся в модель Stable Diffusion XL (через Hugging Face Inference API), для создания соответствующей визуализации. Бот учитывает историю сгенерированных текстов и промптов для изображений, чтобы избежать повторов.

Итоговый пост (текст + изображение) публикуется в указанный Telegram-канал.

## Функциональность

*   **Парсинг новостей:** Из RSS-лент (RIA, TASS, Lenta).
*   **Фильтрация:** По ключевым словам (политика, экономика, страны, имена).
*   **Генерация текста:** Стилизованный пересказ от лица персонажа Витька.
*   **Генерация изображения:** Визуализация сцены, описанной в промпте.
*   **Учёт истории:** Избегание повторения сценариев и визуальных паттернов.
*   **Автопостинг:** Публикация в Telegram-канал.
*   **Автоматизация:** Запуск по расписанию (GitHub Actions).

## Технологии

*   **Язык:** Python
*   **LLM:** Hugging Face (`Qwen/Qwen3-235B-A22B-Instruct-2507`)
*   **Генерация изображений:** Hugging Face Inference API (`stabilityai/stable-diffusion-xl-base-1.0`)
*   **Парсинг RSS:** `feedparser`
*   **API:** `requests`, `huggingface_hub`
*   **Хранение истории:** GitHub Gist
*   **Автоматизация:** GitHub Actions
*   **Работа с изображениями:** `Pillow`
*   **Telegram API:** `requests`

## Настройка

1.  **Создать Telegram-бота:** Обратиться к `@BotFather`, получить `TELEGRAM_BOT_TOKEN`.
2.  **Создать Telegram-канал:** Для публикации.
3.  **Получить токены:**
    *   Hugging Face: [https://huggingface.co/settings/tokens](https://huggingface.co/settings/tokens) (`HF_TOKEN`)
    *   GitHub Gist: [https://github.com/settings/tokens](https://github.com/settings/tokens) (`GIST_TOKEN`)
4.  **Настроить GitHub Secrets:**
    *   В репозитории бота: `Settings` -> `Secrets and variables` -> `Actions`.
    *   Добавить:
        *   `TELEGRAM_BOT_TOKEN`: токен бота
        *   `HF_TOKEN`: токен HF
        *   `GIST_TOKEN`: токен Gist
        *   `TELEGRAM_CHANNEL`: `@notreviews`
5.  **Настроить Gist:**
    *   Создать публичный или секретный Gist (например, `5**********1bcea90b63c**********5`).
    *   Внутри создать файлы: `seen.json` (содержимое: `[]`), `history.json` (содержимое: `[]`), `image_prompt.json` (содержимое: `[]`).
6.  **Настроить GitHub Actions:**
    *   Файл `.github/workflows/vitok_post.yml` уже содержит нужную конфигурацию.
    *   Workflow будет запускаться по расписанию или вручную.

## Структура репозитория

*   `.github/workflows/vitok_post.yml`: Конфигурация GitHub Actions.
*   `main.py`: Основной скрипт.
*   `requirements.txt`: Зависимости Python.
*   `README.md`: Этот файл.
*   `CHANGELOG.md`: История изменений.

## Вклад

Пулл-реквесты приветствуются. Для существенных изменений создайте отдельную ветку и обсудите изменения в issue перед созданием PR.

## Лицензия

MIT